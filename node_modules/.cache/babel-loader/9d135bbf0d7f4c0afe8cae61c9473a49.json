{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amitalkobi/GitHub/epicure-client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/amitalkobi/GitHub/epicure-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/amitalkobi/GitHub/epicure-client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useState}from\"react\";import{NavLink}from\"react-router-dom\";import\"./LoginPage.scss\";import qs from\"querystring\";import{useNavigate}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){var _useState=useState(\"alkobit@gmail.com\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"123456\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var navigate=useNavigate();var handleSubmit=function handleSubmit(event){event.preventDefault();_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var headers,details,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:headers={\"Content-Type\":\"application/x-www-form-urlencoded\"};details={email:email,password:password};_context.prev=2;_context.next=5;return axios.post(\"http://ec2-3-132-215-69.us-east-2.compute.amazonaws.com/api/v1/users/login\",qs.stringify(details),{headers:headers});case 5:res=_context.sent;localStorage.setItem(\"Token\",res.data.token);navigate(\"/\");_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.log(_context.t0);setMessage(\"Email or password are incorrect\");case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}))();};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login to Epicure\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"E-Mail: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"label\",{className:\"login-message\",children:message}),/*#__PURE__*/_jsx(\"button\",{className:\"login-button\",children:\"Login\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/register\",children:\"Register\"})]});};export default LoginPage;","map":{"version":3,"sources":["/Users/amitalkobi/GitHub/epicure-client/src/pages/LoginPage/LoginPage.tsx"],"names":["axios","useState","NavLink","qs","useNavigate","LoginPage","email","setEmail","password","setPassword","message","setMessage","navigate","handleSubmit","event","preventDefault","headers","details","post","stringify","res","localStorage","setItem","data","token","console","log","e","target","value"],"mappings":"2WAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,MAAO,kBAAP,CACA,MAAOC,CAAAA,EAAP,KAAe,aAAf,CACA,OAASC,WAAT,KAA4B,cAA5B,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,cAA0BJ,QAAQ,CAAC,mBAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAAgCN,QAAQ,CAAC,QAAD,CAAxC,yCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAA8BR,QAAQ,CAAC,EAAD,CAAtC,yCAAOS,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEA,GAAMS,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAgB,CACnCA,KAAK,CAACC,cAAN,GACA,wDAAC,2JACOC,OADP,CACiB,CACd,eAAgB,mCADF,CADjB,CAKOC,OALP,CAKiB,CACdX,KAAK,CAAEA,KADO,CAEdE,QAAQ,CAAEA,QAFI,CALjB,uCAUqBR,CAAAA,KAAK,CAACkB,IAAN,CAChB,4EADgB,CAEhBf,EAAE,CAACgB,SAAH,CAAaF,OAAb,CAFgB,CAGhB,CAAED,OAAO,CAAEA,OAAX,CAHgB,CAVrB,QAUSI,GAVT,eAgBGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,GAAG,CAACG,IAAJ,CAASC,KAAvC,EACAZ,QAAQ,CAAC,GAAD,CAAR,CAjBH,iFAmBGa,OAAO,CAACC,GAAR,cACAf,UAAU,CAAC,iCAAD,CAAV,CApBH,qEAAD,KAuBD,CAzBD,CA2BA,mBACE,cAAM,QAAQ,CAAEE,YAAhB,CAA8B,SAAS,CAAC,YAAxC,wBACE,wCADF,cAEE,aAAK,SAAS,CAAC,aAAf,wBACE,cAAO,OAAO,CAAC,OAAf,sBADF,cAEE,cACE,IAAI,CAAC,OADP,CAEE,EAAE,CAAC,OAFL,CAGE,QAAQ,CAAE,kBAACc,CAAD,QAAOpB,CAAAA,QAAQ,CAACoB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAHZ,EAFF,GAFF,cAUE,aAAK,SAAS,CAAC,aAAf,wBACE,cAAO,OAAO,CAAC,UAAf,wBADF,cAEE,cACE,IAAI,CAAC,UADP,CAEE,EAAE,CAAC,UAFL,CAGE,QAAQ,CAAE,kBAACF,CAAD,QAAOlB,CAAAA,WAAW,CAACkB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAHZ,EAFF,GAVF,cAkBE,cAAO,SAAS,CAAC,eAAjB,UAAkCnB,OAAlC,EAlBF,cAmBE,eAAQ,SAAS,CAAC,cAAlB,mBAnBF,cAoBE,KAAC,OAAD,EAAS,EAAE,CAAC,WAAZ,sBApBF,GADF,CAwBD,CAzDD,CA2DA,cAAeL,CAAAA,SAAf","sourcesContent":["import axios from \"axios\";\nimport { useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport \"./LoginPage.scss\";\nimport qs from \"querystring\";\nimport { useNavigate } from \"react-router\";\n\nconst LoginPage = () => {\n  const [email, setEmail] = useState(\"alkobit@gmail.com\");\n  const [password, setPassword] = useState(\"123456\");\n  const [message, setMessage] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleSubmit = (event: any) => {\n    event.preventDefault();\n    (async () => {\n      const headers = {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      };\n\n      const details = {\n        email: email,\n        password: password,\n      };\n      try {\n        const res = await axios.post(\n          \"http://ec2-3-132-215-69.us-east-2.compute.amazonaws.com/api/v1/users/login\",\n          qs.stringify(details),\n          { headers: headers }\n        );\n\n        localStorage.setItem(\"Token\", res.data.token);\n        navigate(\"/\");\n      } catch (error) {\n        console.log(error);\n        setMessage(\"Email or password are incorrect\");\n      }\n    })();\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"login-form\">\n      <h3>Login to Epicure</h3>\n      <div className=\"login-input\">\n        <label htmlFor=\"email\">E-Mail: </label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n      </div>\n      <div className=\"login-input\">\n        <label htmlFor=\"password\">Password: </label>\n        <input\n          type=\"password\"\n          id=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n      </div>\n      <label className=\"login-message\">{message}</label>\n      <button className=\"login-button\">Login</button>\n      <NavLink to=\"/register\">Register</NavLink>\n    </form>\n  );\n};\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}
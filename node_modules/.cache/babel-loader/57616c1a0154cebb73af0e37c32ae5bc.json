{"ast":null,"code":"import _objectSpread from\"/Users/amitalkobi/Projects/epicure/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/amitalkobi/Projects/epicure/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/amitalkobi/Projects/epicure/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from\"react\";import{Controller,useForm}from\"react-hook-form\";import Input from\"@mui/material/Input\";import Button from\"@mui/material/Button\";import axios from\"axios\";import qs from\"querystring\";import\"./AddEdit.scss\";import{useNavigate}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddEditChef=function AddEditChef(){var id=window.location.pathname.split(\"/\")[3];var isAddMode=!id;var navigate=useNavigate();var _useForm=useForm({defaultValues:{name:\"\",description:\"\",pic:\"\"},mode:\"all\"}),control=_useForm.control,handleSubmit=_useForm.handleSubmit,register=_useForm.register,reset=_useForm.reset,setValue=_useForm.setValue,errors=_useForm.formState.errors;var onSubmit=function onSubmit(chef){isAddMode?createChef(chef):updateChef(id,chef);navigate(\"/admin\");};var createChef=function createChef(chef){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var headers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:headers={\"Content-Type\":\"application/x-www-form-urlencoded\"};_context.next=3;return axios.post(\"http://localhost:3001/api/v1/chefs\",qs.stringify(chef),{headers:headers});case 3:case\"end\":return _context.stop();}}},_callee);}))();};var updateChef=function updateChef(id,chef){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var headers;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:headers={\"Content-Type\":\"application/x-www-form-urlencoded\"};_context2.next=3;return axios.put(\"http://localhost:3001/api/v1/chefs/\"+id,qs.stringify(chef),{headers:headers});case 3:case\"end\":return _context2.stop();}}},_callee2);}))();};useEffect(function(){if(!isAddMode){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res,fields;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios(\"http://localhost:3001/api/v1/chefs/\"+id);case 2:res=_context3.sent;fields=[\"name\",\"description\",\"pic\"];fields.forEach(function(field){return setValue(field,res.data[field]);});case 5:case\"end\":return _context3.stop();}}},_callee3);}))();}},[id,isAddMode,setValue]);return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),onReset:reset,className:\"rest-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:isAddMode?\"Add Chef\":\"Edit Chef\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(Controller,{name:\"name\",control:control,rules:{required:true,maxLength:20},render:function render(){return/*#__PURE__*/_jsx(Input,_objectSpread({},register(\"name\")));}})]}),errors.name&&errors.name.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{role:\"alert\",className:\"input-error\",children:\"Name is required\"}),errors.name&&errors.name.type===\"maxLength\"&&/*#__PURE__*/_jsx(\"span\",{role:\"alert\",className:\"input-error\",children:\"Name length should be less than 20 characters\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(Controller,{name:\"description\",control:control,rules:{required:true},render:function render(){return/*#__PURE__*/_jsx(Input,_objectSpread({},register(\"description\")));}})]}),errors.description&&errors.description.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{role:\"alert\",className:\"input-error\",children:\"Description is required\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Picture\"}),/*#__PURE__*/_jsx(Controller,{name:\"pic\",control:control,rules:{required:true},render:function render(){return/*#__PURE__*/_jsx(Input,_objectSpread({},register(\"pic\")));}})]}),errors.pic&&errors.pic.type===\"required\"&&/*#__PURE__*/_jsx(\"span\",{role:\"alert\",className:\"input-error\",children:\"Picture is required\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-button-cont\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",children:\"Save\"})})]});};export default AddEditChef;","map":{"version":3,"sources":["/Users/amitalkobi/Projects/epicure/src/components/AddEdit/AddEditChef.tsx"],"names":["React","useEffect","Controller","useForm","Input","Button","axios","qs","useNavigate","AddEditChef","id","window","location","pathname","split","isAddMode","navigate","defaultValues","name","description","pic","mode","control","handleSubmit","register","reset","setValue","errors","formState","onSubmit","chef","createChef","updateChef","headers","post","stringify","put","res","fields","forEach","field","data","required","maxLength","type"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport Input from \"@mui/material/Input\";\nimport Button from \"@mui/material/Button\";\nimport axios from \"axios\";\nimport qs from \"querystring\";\nimport \"./AddEdit.scss\";\nimport { useNavigate } from \"react-router\";\n\nconst AddEditChef = () => {\n  const id = window.location.pathname.split(\"/\")[3];\n  const isAddMode = !id;\n  const navigate = useNavigate();\n\n  const {\n    control,\n    handleSubmit,\n    register,\n    reset,\n    setValue,\n    formState: { errors },\n  }: any = useForm({\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      pic: \"\",\n    },\n    mode: \"all\",\n  });\n\n  const onSubmit = (chef: any) => {\n    isAddMode ? createChef(chef) : updateChef(id, chef);\n    navigate(\"/admin\");\n  };\n\n  const createChef = (chef: any) => {\n    (async () => {\n      const headers = {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      };\n\n      await axios.post(\n        \"http://localhost:3001/api/v1/chefs\",\n        qs.stringify(chef),\n        { headers: headers }\n      );\n    })();\n  };\n\n  const updateChef = (id: string, chef: any) => {\n    (async () => {\n      const headers = {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      };\n\n      await axios.put(\n        \"http://localhost:3001/api/v1/chefs/\" + id,\n        qs.stringify(chef),\n        { headers: headers }\n      );\n    })();\n  };\n\n  useEffect(() => {\n    if (!isAddMode) {\n      (async () => {\n        const res = await axios(\"http://localhost:3001/api/v1/chefs/\" + id);\n        const fields = [\"name\", \"description\", \"pic\"];\n        fields.forEach((field) => setValue(field, res.data[field]));\n      })();\n    }\n  }, [id, isAddMode, setValue]);\n\n  return (\n    <form\n      onSubmit={handleSubmit(onSubmit)}\n      onReset={reset}\n      className=\"rest-form\"\n    >\n      <h1>{isAddMode ? \"Add Chef\" : \"Edit Chef\"}</h1>\n      <div className=\"input-container\">\n        <div>\n          <div className=\"input-field\">\n            <label>Name</label>\n            <Controller\n              name=\"name\"\n              control={control}\n              rules={{ required: true, maxLength: 20 }}\n              render={() => <Input {...register(\"name\")} />}\n            />\n          </div>\n          {errors.name && errors.name.type === \"required\" && (\n            <span role=\"alert\" className=\"input-error\">\n              Name is required\n            </span>\n          )}\n          {errors.name && errors.name.type === \"maxLength\" && (\n            <span role=\"alert\" className=\"input-error\">\n              Name length should be less than 20 characters\n            </span>\n          )}\n        </div>\n        <div>\n          <div className=\"input-field\">\n            <label>Description</label>\n            <Controller\n              name=\"description\"\n              control={control}\n              rules={{ required: true }}\n              render={() => <Input {...register(\"description\")} />}\n            />\n          </div>\n          {errors.description && errors.description.type === \"required\" && (\n            <span role=\"alert\" className=\"input-error\">\n              Description is required\n            </span>\n          )}\n        </div>\n        <div>\n          <div className=\"input-field\">\n            <label>Picture</label>\n            <Controller\n              name=\"pic\"\n              control={control}\n              rules={{ required: true }}\n              render={() => <Input {...register(\"pic\")} />}\n            />\n          </div>\n          {errors.pic && errors.pic.type === \"required\" && (\n            <span role=\"alert\" className=\"input-error\">\n              Picture is required\n            </span>\n          )}\n        </div>\n      </div>\n      <div className=\"input-button-cont\">\n        <Button type=\"submit\" variant=\"contained\">\n          Save\n        </Button>\n      </div>\n    </form>\n  );\n};\n\nexport default AddEditChef;\n"]},"metadata":{},"sourceType":"module"}